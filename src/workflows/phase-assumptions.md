<purpose>
Surface opencode's assumptions about a phase before planning, enabling users to correct misconceptions early.

Key insight: This is ANALYSIS of what opencode thinks, not INTAKE of what user knows. No file output - purely conversational to prompt discussion before planning begins.
</purpose>

<process>

<step name="validate_phase" priority="first">
**Validate phase exists**

Phase number: $ARGUMENTS (required)

**If argument missing:**

```
Error: Phase number required.

Usage: phase-assumptions [phase-number]
Example: phase-assumptions 3
```

Exit workflow.

**If argument provided:**

Validate phase exists in ROADMAP.md:

```bash
cat .paul/ROADMAP.md | grep -i "Phase ${PHASE}"
```

**If phase not found:**

```
Error: Phase ${PHASE} not found in roadmap.

Available phases:
[list phases from roadmap]
```

Exit workflow.

**If phase found:**

Parse phase details:
- Phase number
- Phase name
- Phase description/goal
- Any scope details mentioned

Continue to analyze_phase.
</step>

<step name="analyze_phase">
**Identify assumptions across five areas:**

Based on ROADMAP.md description and PROJECT.md context, surface assumptions:

**1. Technical Approach:**
What libraries, frameworks, patterns, or tools would opencode use?
- "I'd use X library because..."
- "I'd follow Y pattern because..."
- "I'd structure this as Z because..."

**2. Implementation Order:**
What would opencode build first, second, third?
- "I'd start with X because it's foundational"
- "Then Y because it depends on X"
- "Finally Z because..."

**3. Scope Boundaries:**
What's included vs excluded in opencode's interpretation?
- "This phase includes: A, B, C"
- "This phase does NOT include: D, E, F"
- "Boundary ambiguities: G could go either way"

**4. Risk Areas:**
Where does opencode expect complexity or challenges?
- "The tricky part is X because..."
- "Potential issues: Y, Z"
- "I'd watch out for..."

**5. Dependencies:**
What does opencode assume exists or needs to be in place?
- "This assumes X from previous phases"
- "External dependencies: Y, Z"
- "This will be consumed by..."

**Confidence levels:**
- "Fairly confident: ..." (clear from roadmap)
- "Assuming: ..." (reasonable inference)
- "Unclear: ..." (could go multiple ways)
</step>

<step name="present_assumptions">
**Present assumptions in scannable format:**

```
## My Assumptions for Phase ${PHASE}: ${PHASE_NAME}

### Technical Approach
[List assumptions about how to implement]

### Implementation Order
[List assumptions about sequencing]

### Scope Boundaries
**In scope:** [what's included]
**Out of scope:** [what's excluded]
**Ambiguous:** [what could go either way]

### Risk Areas
[List anticipated challenges]

### Dependencies
**From prior phases:** [what's needed]
**External:** [third-party needs]
**Feeds into:** [what future phases need from this]

---

**What do you think?**

Are these assumptions accurate? Let me know:
- What I got right
- What I got wrong
- What I'm missing
```

Wait for user response.
</step>

<step name="gather_feedback">
**Process user corrections:**

**If user provides corrections:**

```
Got it. Key corrections:
- [correction 1]
- [correction 2]

This changes my understanding significantly. [Summarize new understanding]
```

**If user confirms assumptions:**

```
Great, assumptions validated.
```

Continue to offer_next.
</step>

<step name="offer_next">
**Present next steps:**

```
What's next?
1. Plan this phase - Create detailed execution plans with corrected assumptions
2. Re-examine assumptions - I'll analyze again with your corrections
3. Done for now
```

Wait for user selection.

If "Plan this phase": Proceed to plan-phase workflow with validated assumptions
If "Re-examine": Return to analyze_phase with updated understanding
</step>

</process>

<success_criteria>
- [ ] Phase number validated against ROADMAP.md
- [ ] Assumptions surfaced across five areas
- [ ] Confidence levels marked where appropriate
- [ ] "What do you think?" prompt presented
- [ ] User feedback acknowledged
- [ ] Clear next steps offered
</success_criteria>
